

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Emacs setup for following coding guidelines &mdash; Astropy v0.0.0 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/astropyicon.ico"/>
    <link rel="top" title="Astropy v0.0.0 documentation" href="../index.html" />
    <link rel="up" title="Coding Guidelines (Draft 3)" href="codeguide.html" />
    <link rel="next" title="Documentation Guidelines (Draft 2)" href="docguide.html" />
    <link rel="prev" title="Coding Guidelines (Draft 3)" href="codeguide.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="docguide.html" title="Documentation Guidelines (Draft 2)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="codeguide.html" title="Coding Guidelines (Draft 3)"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Astropy v0.0.0 documentation</a> &raquo;</li>
          <li><a href="index.html" >Documentation for Developers</a> &raquo;</li>
          <li><a href="codeguide.html" accesskey="U">Coding Guidelines (Draft 3)</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="emacs-setup-for-following-coding-guidelines">
<h1>Emacs setup for following coding guidelines<a class="headerlink" href="#emacs-setup-for-following-coding-guidelines" title="Permalink to this headline">¶</a></h1>
<p>The AstroPy coding guidelines are listed in <a class="reference internal" href="codeguide.html"><em>Coding Guidelines (Draft 3)</em></a>. This
document will describe some configuration options for Emacs, that will
help in ensuring that Python code satisfies the guidelines. Emacs can
be configured in several different ways. So instead of providing a drop
in configuration file, only the individual configurations are presented
below.</p>
<p>For this setup we will need <a class="reference external" href="http://www.emacswiki.org/emacs/FlyMake">flymake</a>, <a class="reference external" href="http://pypi.python.org/pypi/pyflakes">pyflakes</a> and the <a class="reference external" href="http://pypi.python.org/pypi/pep8">pep8</a> Python
script, in addition to <cite>python-mode</cite>.</p>
<p>Flymake comes with Emacs 23. The rest can be obtained from their
websites, or can be installed using <cite>easy_install</cite> or <cite>pip</cite>.</p>
<div class="section" id="global-settings">
<h2>Global settings<a class="headerlink" href="#global-settings" title="Permalink to this headline">¶</a></h2>
<div class="section" id="no-tabs">
<h3>No tabs<a class="headerlink" href="#no-tabs" title="Permalink to this headline">¶</a></h3>
<p>This setting will cause all tabs to be replaced with spaces. The number
of spaces to use is set in the <a class="reference internal" href="#basic-settings"><em>Basic settings</em></a> section below.</p>
<div class="highlight-scheme"><div class="highlight"><pre><span class="c1">;; Don&#39;t use TABS for indentations.</span>
<span class="p">(</span><span class="nf">setq-default</span> <span class="nv">indent-tabs-mode</span> <span class="nv">nil</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="maximum-number-of-characters-in-a-line">
<h3>Maximum number of characters in a line<a class="headerlink" href="#maximum-number-of-characters-in-a-line" title="Permalink to this headline">¶</a></h3>
<p>Emacs will automatically insert a new line after &#8220;fill-column&#8221; number
of columns. PEP8 specifies a maximum of 79, but this can be set to a
smaller value also, for example 72.</p>
<div class="highlight-scheme"><div class="highlight"><pre><span class="c1">;; Set the number to the number of columns to use.</span>
<span class="p">(</span><span class="nf">setq-default</span> <span class="nv">fill-column</span> <span class="mi">79</span><span class="p">)</span>

<span class="c1">;; Add Autofill mode to mode hooks.</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;text-mode-hook</span> <span class="ss">&#39;turn-on-auto-fill</span><span class="p">)</span>

<span class="c1">;; Show line number in the mode line.</span>
<span class="p">(</span><span class="nf">line-number-mode</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1">;; Show column number in the mode line.</span>
<span class="p">(</span><span class="nf">column-number-mode</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="syntax-highlighting">
<h3>Syntax highlighting<a class="headerlink" href="#syntax-highlighting" title="Permalink to this headline">¶</a></h3>
<p>Enable syntax highlighting. This will also highlight lines that form a
region.</p>
<div class="highlight-scheme"><div class="highlight"><pre><span class="p">(</span><span class="nf">global-font-lock-mode</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="python-specific-settings">
<h2>Python specific settings<a class="headerlink" href="#python-specific-settings" title="Permalink to this headline">¶</a></h2>
<div class="section" id="basic-settings">
<span id="id1"></span><h3>Basic settings<a class="headerlink" href="#basic-settings" title="Permalink to this headline">¶</a></h3>
<p>Indentation is automatically added. When a tab is pressed it is
replaced with 4 spaces. When backspace is pressed on an empty line, the
cursor will jump to the previous indentation level.</p>
<div class="highlight-scheme"><div class="highlight"><pre><span class="p">(</span><span class="nf">load-library</span> <span class="s">&quot;python&quot;</span><span class="p">)</span>

<span class="p">(</span><span class="nf">autoload</span> <span class="ss">&#39;python-mode</span> <span class="s">&quot;python-mode&quot;</span> <span class="s">&quot;Python Mode.&quot;</span> <span class="nv">t</span><span class="p">)</span>
<span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;auto-mode-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;\\.py\\&#39;&quot;</span> <span class="o">.</span> <span class="nv">python-mode</span><span class="p">))</span>
<span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;interpreter-mode-alist</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;python&quot;</span> <span class="o">.</span> <span class="nv">python-mode</span><span class="p">))</span>

<span class="p">(</span><span class="nf">setq</span> <span class="nv">interpreter-mode-alist</span>
      <span class="p">(</span><span class="nb">cons </span><span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;python&quot;</span> <span class="o">.</span> <span class="nv">python-mode</span><span class="p">)</span>
            <span class="nv">interpreter-mode-alist</span><span class="p">)</span>
      <span class="nv">python-mode-hook</span>
      <span class="o">&#39;</span><span class="p">(</span><span class="k">lambda </span><span class="p">()</span> <span class="p">(</span><span class="nf">progn</span>
                    <span class="p">(</span><span class="nf">set-variable</span> <span class="ss">&#39;py-indent-offset</span> <span class="mi">4</span><span class="p">)</span>
                    <span class="p">(</span><span class="nf">set-variable</span> <span class="ss">&#39;indent-tabs-mode</span> <span class="nv">nil</span><span class="p">))))</span>
</pre></div>
</div>
</div>
<div class="section" id="highlight-the-column-where-a-line-must-stop">
<h3>Highlight the column where a line must stop<a class="headerlink" href="#highlight-the-column-where-a-line-must-stop" title="Permalink to this headline">¶</a></h3>
<p>The &#8220;fill-column&#8221; column is highlighted in red. For this to work,
download <a class="reference external" href="http://www.emacswiki.org/emacs/column-marker.el">column-marker.el</a> and place it in the
Emacs configuration directory.</p>
<div class="highlight-scheme"><div class="highlight"><pre><span class="c1">;; Highlight character at &quot;fill-column&quot; position.</span>
<span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;column-marker</span><span class="p">)</span>
<span class="p">(</span><span class="nf">set-face-background</span> <span class="ss">&#39;column-marker-1</span> <span class="s">&quot;red&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;python-mode-hook</span>
          <span class="p">(</span><span class="k">lambda </span><span class="p">()</span> <span class="p">(</span><span class="nf">interactive</span><span class="p">)</span>
            <span class="p">(</span><span class="nf">column-marker-1</span> <span class="nv">fill-column</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3>Flymake<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Flymake will mark lines that do not satisfy syntax requirements in
red. When cursor is on such a line a message is displayed in the
mini-buffer. When mouse pointer is on such a line a &#8220;tool tip&#8221; message
is also shown.</p>
<p>For flymake to work with <cite>pep8</cite> and <cite>pyflakes</cite>, create an
executable file named <cite>pychecker</cite> with the following contents. This
file must be in the system path.</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="c">#!/bin/bash</span>

pyflakes <span class="s2">&quot;$1&quot;</span>
pep8 --ignore<span class="o">=</span>E221,E701,E202 --repeat <span class="s2">&quot;$1&quot;</span>
<span class="nb">true</span>
</pre></div>
</div>
<p>Add the following code to Emacs configurations.</p>
<div class="highlight-scheme"><div class="highlight"><pre><span class="c1">;; Setup for Flymake code checking.</span>
<span class="p">(</span><span class="nf">require</span> <span class="ss">&#39;flymake</span><span class="p">)</span>
<span class="p">(</span><span class="nf">load-library</span> <span class="s">&quot;flymake-cursor&quot;</span><span class="p">)</span>

<span class="c1">;; Script that flymake uses to check code. This script must be</span>
<span class="c1">;; present in the system path.</span>
<span class="p">(</span><span class="nf">setq</span> <span class="nv">pycodechecker</span> <span class="s">&quot;pychecker&quot;</span><span class="p">)</span>

<span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">load </span><span class="s">&quot;flymake&quot;</span> <span class="nv">t</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">defun</span> <span class="nv">flymake-pycodecheck-init</span> <span class="p">()</span>
    <span class="p">(</span><span class="k">let* </span><span class="p">((</span><span class="nf">temp-file</span> <span class="p">(</span><span class="nf">flymake-init-create-temp-buffer-copy</span>
                       <span class="ss">&#39;flymake-create-temp-inplace</span><span class="p">))</span>
           <span class="p">(</span><span class="nf">local-file</span> <span class="p">(</span><span class="nf">file-relative-name</span>
                        <span class="nv">temp-file</span>
                        <span class="p">(</span><span class="nf">file-name-directory</span> <span class="nv">buffer-file-name</span><span class="p">))))</span>
      <span class="p">(</span><span class="nb">list </span><span class="nv">pycodechecker</span> <span class="p">(</span><span class="nb">list </span><span class="nv">local-file</span><span class="p">))))</span>
  <span class="p">(</span><span class="nf">add-to-list</span> <span class="ss">&#39;flymake-allowed-file-name-masks</span>
               <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;\\.py\\&#39;&quot;</span> <span class="nv">flymake-pycodecheck-init</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;python-mode-hook</span> <span class="ss">&#39;flymake-mode</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Flymake will save files with suffix <em>_flymake</em> in the current
directory. If it crashes for some reason, then these files will not
get deleted.</p>
<p class="last">Sometimes there is a delay in refreshing the results.</p>
</div>
</div>
<div class="section" id="delete-trailing-white-spaces-and-blank-lines">
<h3>Delete trailing white spaces and blank lines<a class="headerlink" href="#delete-trailing-white-spaces-and-blank-lines" title="Permalink to this headline">¶</a></h3>
<p>To manually delete trailing whitespaces, press <cite>C-t C-w</cite>, which will
run the command &#8220;delete-whitespaces`. This command is also run when a
file is saved, and hence all trailing whitespaces will be deleted on
saving a Python file.</p>
<p>To make sure that all &#8220;words&#8221; are separated by only one space, type
<cite>M-SPC</cite> (use the ALT key since <cite>M-SPC</cite> sometimes brings up a context
menu.).</p>
<p>To collapse a set of blank lines to one blank line, place the cursor on
one of these and press <cite>C-x C-o</cite>. This is useful for deleting multiple
black lines at the end of a file.</p>
<div class="highlight-scheme"><div class="highlight"><pre><span class="c1">;; Remove trailing whitespace manually by typing C-t C-w.</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;python-mode-hook</span>
          <span class="p">(</span><span class="k">lambda </span><span class="p">()</span>
            <span class="p">(</span><span class="nf">local-set-key</span> <span class="p">(</span><span class="nf">kbd</span> <span class="s">&quot;C-t C-w&quot;</span><span class="p">)</span>
                           <span class="ss">&#39;delete-trailing-whitespace</span><span class="p">)))</span>

<span class="c1">;; Automatically remove trailing whitespace when file is saved.</span>
<span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;python-mode-hook</span>
      <span class="p">(</span><span class="nf">lambda</span><span class="p">()</span>
        <span class="p">(</span><span class="nf">add-hook</span> <span class="ss">&#39;local-write-file-hooks</span>
              <span class="o">&#39;</span><span class="p">(</span><span class="nv">lambda</span><span class="p">()</span>
                 <span class="p">(</span><span class="nf">save-excursion</span>
                   <span class="p">(</span><span class="nf">delete-trailing-whitespace</span><span class="p">))))))</span>

<span class="c1">;; Use M-SPC (use ALT key) to make sure that words are separated by</span>
<span class="c1">;; just one space. Use C-x C-o to collapse a set of empty lines</span>
<span class="c1">;; around the cursor to one empty line. Useful for deleting all but</span>
<span class="c1">;; one blank line at end of file. To do this go to end of file (M-&gt;)</span>
<span class="c1">;; and type C-x C-o.</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/astropylogo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Emacs setup for following coding guidelines</a><ul>
<li><a class="reference internal" href="#global-settings">Global settings</a><ul>
<li><a class="reference internal" href="#no-tabs">No tabs</a></li>
<li><a class="reference internal" href="#maximum-number-of-characters-in-a-line">Maximum number of characters in a line</a></li>
<li><a class="reference internal" href="#syntax-highlighting">Syntax highlighting</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python-specific-settings">Python specific settings</a><ul>
<li><a class="reference internal" href="#basic-settings">Basic settings</a></li>
<li><a class="reference internal" href="#highlight-the-column-where-a-line-must-stop">Highlight the column where a line must stop</a></li>
<li><a class="reference internal" href="#id2">Flymake</a></li>
<li><a class="reference internal" href="#delete-trailing-white-spaces-and-blank-lines">Delete trailing white spaces and blank lines</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="codeguide.html"
                        title="previous chapter">Coding Guidelines (Draft 3)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="docguide.html"
                        title="next chapter">Documentation Guidelines (Draft 2)</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/development/codeguide_emacs.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="docguide.html" title="Documentation Guidelines (Draft 2)"
             >next</a> |</li>
        <li class="right" >
          <a href="codeguide.html" title="Coding Guidelines (Draft 3)"
             >previous</a> |</li>
        <li><a href="../index.html">Astropy v0.0.0 documentation</a> &raquo;</li>
          <li><a href="index.html" >Documentation for Developers</a> &raquo;</li>
          <li><a href="codeguide.html" >Coding Guidelines (Draft 3)</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Erik Tollerud, Thomas Robitaille, Perry Greenfield, and the Astropy Collaboration.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>